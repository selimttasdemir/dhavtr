option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: server:app
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/99_create_uploads_dir.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      set -e
      APP_DIR="/var/app/current"
      UPLOADS_DIR="$APP_DIR/uploads"
      if [ ! -d "$UPLOADS_DIR" ]; then
        mkdir -p "$UPLOADS_DIR"
        chown webapp:webapp "$UPLOADS_DIR" || true
        chmod 755 "$UPLOADS_DIR"
      fi
